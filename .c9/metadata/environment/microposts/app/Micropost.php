{"filter":false,"title":"Micropost.php","tooltip":"/microposts/app/Micropost.php","undoManager":{"mark":10,"position":4,"stack":[[{"start":{"row":15,"column":4},"end":{"row":15,"column":8},"action":"remove","lines":["    "],"id":1}],[{"start":{"row":18,"column":5},"end":{"row":19,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"insert","lines":["    "]},{"start":{"row":19,"column":4},"end":{"row":20,"column":0},"action":"insert","lines":["",""]},{"start":{"row":20,"column":0},"end":{"row":20,"column":4},"action":"insert","lines":["    "]},{"start":{"row":20,"column":4},"end":{"row":21,"column":0},"action":"insert","lines":["",""]},{"start":{"row":21,"column":0},"end":{"row":21,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":20,"column":4},"end":{"row":23,"column":16},"action":"insert","lines":["    public function favoring()","    {","        return $this->belongsToMany(User::class, 'user_fav', 'user_id', 'fav_id')->withTimestamps();","    } //お気に入りの取得"],"id":3}],[{"start":{"row":20,"column":4},"end":{"row":20,"column":8},"action":"remove","lines":["    "],"id":4}],[{"start":{"row":20,"column":3},"end":{"row":24,"column":4},"action":"remove","lines":[" public function favoring()","    {","        return $this->belongsToMany(User::class, 'user_fav', 'user_id', 'fav_id')->withTimestamps();","    } //お気に入りの取得","    "],"id":5},{"start":{"row":20,"column":2},"end":{"row":20,"column":3},"action":"remove","lines":[" "]},{"start":{"row":20,"column":1},"end":{"row":20,"column":2},"action":"remove","lines":[" "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":46,"column":5},"end":{"row":47,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":46,"column":5},"end":{"row":47,"column":0},"action":"remove","lines":["",""],"id":11}],[{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"remove","lines":["    "],"id":12},{"start":{"row":52,"column":4},"end":{"row":53,"column":0},"action":"remove","lines":["",""]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"remove","lines":["    "]},{"start":{"row":51,"column":4},"end":{"row":52,"column":0},"action":"remove","lines":["",""]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"remove","lines":["    "]},{"start":{"row":50,"column":4},"end":{"row":51,"column":0},"action":"remove","lines":["",""]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"remove","lines":["    "]},{"start":{"row":49,"column":4},"end":{"row":50,"column":0},"action":"remove","lines":["",""]},{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"remove","lines":["    "]},{"start":{"row":48,"column":4},"end":{"row":49,"column":0},"action":"remove","lines":["",""]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"remove","lines":["    "]},{"start":{"row":47,"column":4},"end":{"row":48,"column":0},"action":"remove","lines":["",""]},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":26,"column":0},"end":{"row":73,"column":5},"action":"insert","lines":["    ","    public function fav($micropostId) { // ","","    $exist = $this->is_fav($micropostId); // 既にファボがあるか","","        if ($exist) {","","        // 既にfavしていれば何もしない","","        return false;","","    } else {","","        // 未favであればfavする","","        $this->favoring()->attach($micropostId);","","        return true;","","     }","    }","    ","    ","    ","    ","    ","    ","    "," public function unfav($micropostId)","    {","        ","    $exist = $this->is_fav($micropostId);","    ","    if ($exist) {","        // 既にfavしていればfavを外す","        $this->favoring()->detach($micropostId);","        return true;","    } else {","        // 未favであれば何もしない","        return false;","    }","    }   ","","    "," ","    public function is_fav($micropostId) {","    return $this->favoring()->where('fav_id', $micropostId)->exists();","    }"],"id":13}],[{"start":{"row":24,"column":0},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":25,"column":0},"end":{"row":26,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":20,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["    public function favoring()","    {","        return $this->belongsToMany(Micropost::class, 'user_fav', 'user_id', 'fav_id')->withTimestamps();","    } //お気に入りの取得",""],"id":15}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":16,"column":5},"end":{"row":16,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1524826100814,"hash":"1995358e24e4ff42f1c28317d6b31ad28b9196d3"}